<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>My FTP-server</title>
    <link type="image/png" sizes="16x16" rel="icon" href="favicon.png">
    <style>
        .flex-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .flex-item {
            text-align: center;
            font-size: 1.1em;
            /*border: 2px solid #ccc;*/
            padding: 1.5em;
            width: 50%;
        }
        .button{
            width: 300px;
            margin-top: 1px;
            margin-bottom: 1px;
            margin-left: 1px;
            margin-right: 1px;
        }
    </style>
</head>
<body>
    <div class="flex-container">
        <div class="flex-item" id="header">Leancher FTP-server explorer</div>
        <div class="flex-item" id="main"></div>
        <div class="flex-item" id="footer">
            <button id="btBack">Назад</button>
        </div>
    </div>

        <script>
            var ftpPath = "ftp:///192.168.0.127//";

            async function getDirsList(dir) {
                document.getElementById("main").innerHTML = "";

                // отправляет запрос и получаем ответ
                const response = await fetch("/", {
                    method: "POST",
                    headers: { "Accept": "application/json", "Content-Type": "application/json" },
                    body: JSON.stringify({
                        Name: dir
                    })
                });
                // если запрос прошел нормально
                if (response.ok === true) {
                    // получаем данные
                    const dirs = await response.json();
                    dirs.forEach((dirName, index) => {
                        const button = document.createElement("button");
                        button.innerText = dirName;
                        button.id = dirName;
                        button.tabIndex = index;
                        button.className = "button";
                        button.addEventListener("click", async () => await getDirsList(dirName));
                        document.getElementById("main").appendChild(button);
                    });
                }
                else {

                }
            };
            getDirsList("root");
            document.getElementById("btBack").addEventListener("click", async () => await getDirsList("back"));
        </script>
</body>
</html>